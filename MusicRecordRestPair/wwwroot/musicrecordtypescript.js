"use strict";
exports.__esModule = true;
var index_1 = require("./node_modules/axios/index");
var baseUri = "http://matlar.azurewebsites.net/api/MusicRecords";
var buttonElement = document.getElementById("getAllButton");
buttonElement.addEventListener("click", showAllCars);
var outputElement = document.getElementById("content");
var buttonDeleteElement = document.getElementById("deleteButton");
buttonDeleteElement.addEventListener("click", deleteCar);
var addButton = document.getElementById("addButton");
addButton.addEventListener("click", addCar);
var recordList;
function showAllCars() {
    index_1["default"].get(baseUri)
        .then(function (response) {
        // element.innerHTML = generateSuccessHTMLOutput(response);
        // outputHtmlElement.innerHTML = generateHtmlTable(response.data);
        // outputHtmlElement.innerHTML = JSON.stringify(response.data);
        var result = "<ul>";
        response.data.forEach(function (record) {
            result += "<li>" + record.id + " " + record.artist + " " + record.title + "</li>";
        });
        result += "</ul>";
        outputElement.innerHTML = result;
    })["catch"](function (error) {
        if (error.response) {
            // the request was made and the server responded with a status code
            // that falls out of the range of 2xx
            // https://kapeli.com/cheat_sheets/Axios.docset/Contents/Resources/Documents/index
            outputElement.innerHTML = error.message;
        }
        else { // something went wrong in the .then block?
            outputElement.innerHTML = error.message;
        }
    });
}
function deleteCar() {
    var output = document.getElementById("contentDelete");
    var inputElement = document.getElementById("deleteInput");
    var id = inputElement.value;
    var uri = baseUri + "/" + id;
    index_1["default"]["delete"](uri)
        .then(function (response) {
        // element.innerHTML = generateSuccessHTMLOutput(response);
        // outputHtmlElement.innerHTML = generateHtmlTable(response.data);
        console.log(JSON.stringify(response));
        output.innerHTML = response.status + " " + response.statusText;
    })["catch"](function (error) {
        if (error.response) {
            // the request was made and the server responded with a status code
            // that falls out of the range of 2xx
            // https://kapeli.com/cheat_sheets/Axios.docset/Contents/Resources/Documents/index
            output.innerHTML = error.message;
        }
        else { // something went wrong in the .then block?
            output.innerHTML = error.message;
        }
    });
}
function addCar() {
    var addTitleElement = document.getElementById("addtitle");
    var addArtistElement = document.getElementById("addartist");
    var addDurationElement = document.getElementById("addduration");
    var addYOPElement = document.getElementById("addyop");
    var addIDElement = document.getElementById("addid");
    var myArtist = addArtistElement.value;
    var myAlbum = addTitleElement.value;
    var myDuration = Number(addDurationElement.value);
    var myYOP = Number(addYOPElement.value);
    var myID = Number(addIDElement.value);
    var output = document.getElementById("contentAdd");
    // id is generated by the back-end (REST service)
    index_1["default"].post(baseUri, { artist: myArtist, title: myAlbum, price: myDuration, yearOfPublication: myYOP, id: myID })
        .then(function (response) {
        var message = "response " + response.status + " " + response.statusTexts;
        output.innerHTML = message;
        console.log(message);
    })["catch"](function (error) {
        output.innerHTML = error.message;
        console.log(error);
    });
}
